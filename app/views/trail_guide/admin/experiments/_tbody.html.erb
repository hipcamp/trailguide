<tbody>
  <% experiment.variants.each do |variant| %>
    <tr>
      <th scope="row">
        <% if experiment.configuration.preview_url? %>
          <%= link_to variant.name.to_s.humanize.titleize, preview_url(variant), target: :blank, class: "text-dark" %>
        <% else %>
          <%= variant.name.to_s.humanize.titleize %>
        <% end %>

        <% if experiment.running? && !experiment.winner? && participant.variant(experiment) == variant %>
          <span class="fas fa-user text-secondary" data-toggle="tooltip" title="you are currently in this cohort"></span>
        <% end %>
        <% if experiment.winner? && variant == experiment.winner %>
          <span class="fas fa-flag-checkered text-primary" data-toggle="tooltip" title="this variant has been promoted as the winner of the experiment"></span>
        <% end %>
        <% if variant.control? %>
          <span class="fas fa-cog text-muted" data-toggle="tooltip" title="this variant is the control group for this experiment"></span>
        <% end %>
      </th>

      <td><%= experiment_metric @experiment, variant.participants %></td>

      <% if experiment.goals.empty? %>
        <td><%= experiment_metric @experiment, variant.converted %></td>
      <% else %>
        <% experiment.goals.each do |goal| %>
          <td><%= experiment_metric @experiment, variant.converted(goal) %></td>
        <% end %>
      <% end %>

      <td class="text-right">
        <% if experiment.running? && !experiment.winner? %>
          <% if participant.variant(experiment) == variant %>
            <%= link_to trail_guide_admin.leave_experiment_path(experiment.experiment_name), class: "btn btn-sm btn-outline-secondary", method: :put, data: {toggle: :tooltip}, title: 'leave this cohort' do %>
              <span class="fas fa-sign-out-alt fa-flip-horizontal" />
            <% end %>
          <% else %>
            <%= link_to trail_guide_admin.join_experiment_path(experiment.experiment_name, variant.name), class: "btn btn-sm btn-secondary", method: :put, data: {toggle: :tooltip}, title: 'join this cohort' do %>
              <span class="fas fa-sign-in-alt" />
            <% end %>
          <% end %>
        <% end %>

        <% if !experiment.winner? || variant != experiment.winner %>
          <%= link_to trail_guide_admin.winner_experiment_path(experiment.experiment_name, variant.name), class: "btn btn-sm btn-#{experiment.winner? ? "outline-" : ""}primary", method: :put, data: {toggle: :tooltip}, title: 'rollout this variant as the winner for this experiment' do %>
            <span class="fas fa-flag-checkered" />
          <% end %>
        <% elsif experiment.winner? && variant == experiment.winner %>
          <%= link_to trail_guide_admin.clear_experiment_path(experiment.experiment_name), class: "btn btn-sm btn-outline-warning", method: :put, data: {toggle: :tooltip}, title: 'remove this variant as the selected winner' do %>
            <span class="fas fa-minus-circle" />
          <% end %>
        <% end %>
      </td>
    </tr>
  <% end %>
</tbody>
