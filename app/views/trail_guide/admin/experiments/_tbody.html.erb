<tbody>
  <% experiment.variants.sort_by(&:measure).reverse.each do |variant| %>
    <tr>
      <td class="text-left btn-col">
        <%= render partial: 'btn_join', locals: { experiment: experiment, variant: variant } %>
      </td>

      <th scope="row" class="text-left">
        <% if variant.control? %>
          <span class="fas fa-cog text-muted" data-toggle="tooltip" title="this variant is the control group for this experiment"></span>
        <% else %>
          <span class="fas fa-vial text-muted" data-toggle="tooltip" title="this variant is an alternate group for this experiment"></span>
        <% end %>

        <% if experiment.configuration.preview_url? %>
          <%= link_to variant.name.to_s.humanize.titleize, preview_url(variant), target: :blank, class: "text-dark" %>
        <% else %>
          <%= variant.name.to_s.humanize.titleize %>
        <% end %>

        <% if (experiment.running? || experiment.calibrating?) && participant.variant(experiment) == variant %>
          <span class="fas fa-user text-secondary" data-toggle="tooltip" title="you are currently in this cohort"></span>
        <% end %>
        <% if experiment.winner? && variant == experiment.winner %>
          <span class="fas fa-flag-checkered text-primary" data-toggle="tooltip" title="this variant has been promoted as the winner of the experiment"></span>
        <% end %>
      </th>

      <td><%= experiment_metric experiment, variant.participants %></td>

      <% if experiment.goals.empty? %>
        <td><%= experiment_metric experiment, variant.converted %></td>
      <% else %>
        <% experiment.goals.each do |goal| %>
          <td><%= experiment_metric experiment, variant.converted(goal) %></td>
        <% end %>
      <% end %>

      <td class="text-right btn-col">
        <% if !experiment.winner? || variant != experiment.winner %>
          <%= link_to trail_guide_admin.winner_experiment_path(experiment.experiment_name, variant.name), class: "btn btn-sm btn-#{experiment.winner? ? "outline-" : ""}primary", method: :put, data: {toggle: :tooltip}, title: 'rollout this variant as the winner for this experiment' do %>
            <span class="fas fa-flag-checkered" />
          <% end %>
        <% elsif experiment.winner? && variant == experiment.winner %>
          <%= link_to trail_guide_admin.clear_experiment_path(experiment.experiment_name), class: "btn btn-sm btn-outline-warning", method: :put, data: {toggle: :tooltip}, title: 'remove this variant as the selected winner' do %>
            <span class="fas fa-minus-circle" />
          <% end %>
        <% end %>
      </td>
    </tr>
  <% end %>
</tbody>
